<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta name="robots" content="nofollow">
  <title>Manejando Dotfiles Sin Estilo - Lunatic Geek</title>
  <meta property="og:title" content="Manejando Dotfiles Sin Estilo - Lunatic Geek" />
  <meta name="twitter:title" content="Manejando Dotfiles Sin Estilo - Lunatic Geek" />
  <meta name="description" content="El omnisciente algoritmo de YouTube me ha recomendado el vídeo Manage Your Dotfiles With Style! sobre la utilización de GNU Stow para gestionar la ordenación y despliegue de dotfiles. Stow es una de las herramientas más populares para llevar a cabo este tipo de tareas pero nunca la he usado porque me parece absolutamente innecesaria. Es un abuso espurio de un software que está pensado para instalar paquetes en sus propios árboles de directorios que, mediante enlaces simbólicos aparentan estar instalados en el árbol común.">
  <meta property="og:description" content="El omnisciente algoritmo de YouTube me ha recomendado el vídeo Manage Your Dotfiles With Style! sobre la utilización de GNU Stow para gestionar la ordenación y despliegue de dotfiles. Stow es una de las herramientas más populares para llevar a cabo este tipo de tareas pero nunca la he usado porque me parece absolutamente innecesaria. Es un abuso espurio de un software que está pensado para instalar paquetes en sus propios árboles de directorios que, mediante enlaces simbólicos aparentan estar instalados en el árbol común.">
  <meta name="twitter:description" content="El omnisciente algoritmo de YouTube me ha recomendado el vídeo Manage Your Dotfiles With Style! sobre la utilización de GNU Stow para gestionar la ordenación y despliegue de dotfiles. Stow es una de …">
  <meta name="author" content="edkalrio"/>
  <link rel="icon" type="image/png" href="https://lunaticgeek.com/favicon.png" />
  <meta property="og:site_name" content="Lunatic Geek" />
  <meta property="og:url" content="/symlink-dotfiles/" />
  <meta property="og:type" content="article" />
    <meta property="og:image" content="https://lunaticgeek.com/lunaticgeek_2to1.png" />
    <meta name="twitter:image" content="https://lunaticgeek.com/lunaticgeek_2to1.png" />
  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="generator" content="WIT" />
  <meta http-equiv="onion-location" content="http://mdoovnnifyqyl6jmgdibrsbq6tpk22npjhntsjkwvh7syrxgepxdejad.onion/" />
  <link rel="stylesheet" href="/css/style.css" media="all" />
  <link rel="stylesheet" href="/css/syntax.css" media="all" />
  <link rel="stylesheet" href="/css/custom.css" media="all" />
  



</head>

<body>

<header class="site-header">
  <h1 class="site-title"><a href="/"><img src="/lunaticgeek.webp" alt="Lunatic Geek"></a></h1>
	
  <nav class="site-navi">
    <ul class="site-navi-items">
      <li class="site-navi-item-tags"><a href="/tags/" title="Tags">Tags</a></li>
      <li class="site-navi-item-archives"><a href="/archives/" title="Archivo">Archivo</a></li>
      <li class="site-navi-item-about"><a href="/about/" title="Yo">Yo</a></li>
    </ul>
  </nav>
</header>
<hr class="site-header-bottom">


	<div class="main" role="main">
		<article class="article" vocab="https://schema.org/" typeof="BlogPosting">
			
			
			
			<h1 class="article-title" property="headline">Manejando Dotfiles Sin Estilo</h1>
			
			<hr class="article-title-bottom">
			<ul class="article-meta">
				<li class="article-meta-date"><time property="datePublished">2019-01-16</time></li>
				<li class="article-meta-tags">
					<a href="/tags/linux/">
						<b>#</b>Linux
					</a> 
				</li>
				<li class="article-meta-tags">
					<a href="/tags/unix/">
						<b>#</b>Unix
					</a> 
				</li>
				<li class="article-meta-tags">
					<a href="/tags/bash/">
						<b>#</b>Bash
					</a> 
				</li>
				<li class="article-meta-tags">
					<a href="/tags/rice/">
						<b>#</b>Rice
					</a> 
				</li>
				<li class="article-meta-tags">
					<a href="/tags/gnu/">
						<b>#</b>GNU
					</a> 
				</li>
				<div class="twitter">
	<a href="https://twitter.com/intent/tweet?text=Manejando%20Dotfiles%20Sin%20Estilo%20-%20Lunatic%20Geek&url=https%3a%2f%2flunaticgeek.com%2fsymlink-dotfiles%2f" target="_blank">
		<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> Tweet
	</a>
</div>
			</ul>
			
			<p>El omnisciente algoritmo de YouTube me ha recomendado el vídeo <a href="https://www.youtube.com/watch?v=MJBVA4LeJKA">Manage Your Dotfiles With Style!</a> sobre la utilización de <a href="https://www.gnu.org/software/stow/">GNU Stow</a> para gestionar la ordenación y despliegue de dotfiles. Stow es una de las herramientas más populares para llevar a cabo este tipo de tareas pero nunca la he usado porque me parece absolutamente innecesaria. Es un abuso espurio de un software que está pensado para instalar paquetes en sus propios árboles de directorios que, mediante enlaces simbólicos aparentan estar instalados en el árbol común. De hecho, el uso que se hace de Stow es tan simple que se puede emular con un oneliner de Bash que he programado para la ocasión</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">for</span> i in <span class="k">$(</span>find -type f<span class="k">)</span><span class="p">;</span> <span class="k">do</span> ln -sf <span class="s2">&#34;</span><span class="k">$(</span>realpath <span class="s2">&#34;</span><span class="nv">$i</span><span class="s2">&#34;</span><span class="k">)</span><span class="s2">&#34;</span> ~/<span class="s2">&#34;</span><span class="si">${</span><span class="nv">i</span><span class="p">#??</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">done</span>
</code></pre></div><p>Aunque el código es bastante deficiente ya que no debería emplearse <code>find</code> en un bucle <code>for</code> y la expansión de variables es un bashismo intolerable, no me apetecía usar <code>xargs</code> ni extender un comando que funciona con menos de 80 caracteres. Así podríamos desplegar los dotfiles sin necesidad de instalar <code>stow</code> que, por lo general, no viene incluido por defecto en ningún sistema operativo.</p>
<p>De todas formas, no me parece la mejor forma de abordar el problema. Hace más de cuatro años que se me ocurrió una solución superior, si bien nunca la he publicado porque es demasiado manual y carente de ingenio, pero ahora voy a explicarla para establecer una comparación con Stow. Mi alternativa se basa en un script <code>dotfiles.sh</code> que crea enlaces simbólicos. A diferencia de Stow, las direcciones de estos no se basan en la jerarquía de los archivos sino que están codificadas a mano. Aunque suena bastante tedioso, solo hay que añadir una linea cada vez que creemos un nuevo dotfile. El resultado concreto es el siguiente</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/sh
</span><span class="cp"></span>
ln -sf ~/dotfiles/alias ~/.bash_aliases
ln -sf ~/dotfiles/bash ~/.bashrc
ln -sf ~/dotfiles/getmail ~/.getmail/getmailrc
ln -sf ~/dotfiles/i3 ~/.config/i3/config
ln -sf ~/dotfiles/sublime ~/.config/sublime-text-3/Packages/User/Preferences.sublime-settings
ln -sf ~/dotfiles/xmodmap ~/.Xmodmap
ln -sf ~/dotfiles/xresources ~/.Xresources
ln -sf ~/dotfiles/zathura ~/.config/zathura/zathurarc
ln -sf ~/dotfiles/irssi ~/.irssi/config
ln -sf ~/dotfiles/git ~/.gitconfig
ln -sf ~/dotfiles/dunst ~/.config/dunst/dunstrc
ln -sf ~/dotfiles/newsboat ~/.newsboat/config
</code></pre></div><p>Si leemos con atención se verán las que considero ventajas de este método. No hay que crear una falsa jerarquía de archivos, pudiendo almacenarlos todos en la misma carpeta para mejorar el orden y permite renombrar los dotfiles como queramos ya que su denominación obligatoria se pospone hasta la creación de los symlinks. Concretamente, mi script se ejecuta sobre la siguiente lista de archivos</p>
<pre><code>~/dotfiles
├── alias
├── bash
├── dunst
├── getmail
├── git
├── i3
├── irssi
├── newsboat
├── sublime
├── xmodmap
├── xresources
└── zathura
</code></pre><p>En contraposición a esta simplicidad, podemos generar la estructura que Stow exigiría a los mismos dotfiles para funcionar.</p>
<pre><code>~/dotfiles
├── .bash_aliases
├── .bashrc
├── .config
│   ├── dunst
│   │   └── dunstrc
│   ├── i3
│   │   └── config
│   ├── sublime-text-3
│   │   └── Packages
│   │       └── User
│   │           └── Preferences.sublime-settings
│   └── zathura
│       └── zathurarc
├── .getmail
│   └── getmailrc
├── .gitconfig
├── .irssi
│   └── config
├── .newsboat
│   └── config
├── .Xmodmap
└── .Xresources
</code></pre><p>Las diferencias son más que evidentes, pero la elección de una forma u otra para administrar nuestros archivos de configuración es muy subjetiva y en el fondo va a estar regida por preferencias personales.</p>

			<div property="author" typeof="Person">
				<meta property="name" content="edkalrio" />
			</div>
			<div property="publisher" typeof="Organization">
				<meta property="name" content="Lunatic Geek Blog" />
				<div property="logo" typeof="ImageObject">
					<meta property="url" content="https://lunaticgeek.com/lunaticgeek.webp" />
				</div>
			</div>
		</article>

	</div>


<div class="site-footer">
  <div class="copyright">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
      <img src="/creative-commons.svg" class="fa" alt="creative commons" />
    </a>
    RW Labs 2020</div>
  <ul class="site-footer-items">
    
    <li class="site-footer-item-rsslink">
      <a href="https://feed.lunaticgeek.com" type="application/rss+xml" target="_blank" title="RSS">
        
        <img src="/rss.svg" class="fa" alt="feed" />
      </a>
    </li>
    <li>
      <a href="http://mdoovnnifyqyl6jmgdibrsbq6tpk22npjhntsjkwvh7syrxgepxdejad.onion">
        <img src="/tor.svg" class="fa" alt="tor" />
      </a>
    </li>
  </ul>
  <div class="powerdby">
    Powered by WIT, based on <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/taikii/whiteplain">Whiteplain</a>
  </div>
</div>



</body>
</html>
