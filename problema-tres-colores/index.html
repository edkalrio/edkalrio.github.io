<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta name="robots" content="nofollow">
  <title>El Problema de los Tres Colores - Lunatic Geek</title>
  <meta property="og:title" content="El Problema de los Tres Colores - Lunatic Geek" />
  <meta name="twitter:title" content="El Problema de los Tres Colores - Lunatic Geek" />
  <meta name="description" content="Me han presentado un problema de diseño que me gustaría compartir por su resultado sorprendentemente poco intuitivo.
Cuando diseñamos el estilo de una web accesible, el contraste de los elementos que la forman es uno de los principales puntos a tener en cuenta. No hay que ser experto en óptica para darse cuenta de que si queremos maximizar el contraste de un fondo blanco debemos colorear el texto en negro y viceversa.">
  <meta property="og:description" content="Me han presentado un problema de diseño que me gustaría compartir por su resultado sorprendentemente poco intuitivo.
Cuando diseñamos el estilo de una web accesible, el contraste de los elementos que la forman es uno de los principales puntos a tener en cuenta. No hay que ser experto en óptica para darse cuenta de que si queremos maximizar el contraste de un fondo blanco debemos colorear el texto en negro y viceversa.">
  <meta name="twitter:description" content="Me han presentado un problema de diseño que me gustaría compartir por su resultado sorprendentemente poco intuitivo.
Cuando diseñamos el estilo de una web accesible, el contraste de los elementos que …">
  <meta name="author" content="edkalrio"/>
  <link rel="icon" type="image/png" href="https://lunaticgeek.com/favicon.png" />
  <meta property="og:site_name" content="Lunatic Geek" />
  <meta property="og:url" content="/problema-tres-colores/" />
  <meta property="og:type" content="article" />
    <meta property="og:image" content="https://lunaticgeek.com/lunaticgeek_2to1.png" />
    <meta name="twitter:image" content="https://lunaticgeek.com/lunaticgeek_2to1.png" />
  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="generator" content="WIT" />
  <meta http-equiv="onion-location" content="http://mdoovnnifyqyl6jmgdibrsbq6tpk22npjhntsjkwvh7syrxgepxdejad.onion/" />
  <link rel="stylesheet" href="/css/style.css" media="all" />
  <link rel="stylesheet" href="/css/syntax.css" media="all" />
  <link rel="stylesheet" href="/css/custom.css" media="all" />
  



</head>

<body>

<header class="site-header">
  <h1 class="site-title"><a href="/"><img src="/lunaticgeek.webp" alt="Lunatic Geek"></a></h1>
	
  <nav class="site-navi">
    <ul class="site-navi-items">
      <li class="site-navi-item-tags"><a href="/tags/" title="Tags">Tags</a></li>
      <li class="site-navi-item-archives"><a href="/archives/" title="Archivo">Archivo</a></li>
      <li class="site-navi-item-about"><a href="/about/" title="Yo">Yo</a></li>
    </ul>
  </nav>
</header>
<hr class="site-header-bottom">


	<div class="main" role="main">
		<article class="article" vocab="https://schema.org/" typeof="BlogPosting">
			
			
			
			<h1 class="article-title" property="headline">El Problema de los Tres Colores</h1>
			
			<hr class="article-title-bottom">
			<ul class="article-meta">
				<li class="article-meta-date"><time property="datePublished">2018-08-31</time></li>
				<li class="article-meta-tags">
					<a href="/tags/programaci%C3%B3n/">
						<b>#</b>Programación
					</a> 
				</li>
				<li class="article-meta-tags">
					<a href="/tags/rgb/">
						<b>#</b>RGB
					</a> 
				</li>
				<div class="twitter">
	<a href="https://twitter.com/intent/tweet?text=El%20Problema%20de%20los%20Tres%20Colores%20-%20Lunatic%20Geek&url=https%3a%2f%2flunaticgeek.com%2fproblema-tres-colores%2f" target="_blank">
		<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> Tweet
	</a>
</div>
			</ul>
			
			<p>Me han presentado un problema de diseño que me gustaría compartir por su resultado sorprendentemente poco intuitivo.</p>
<p>Cuando diseñamos el estilo de una web accesible, el contraste de los elementos que la forman es uno de los principales puntos a tener en cuenta. No hay que ser experto en óptica para darse cuenta de que si queremos maximizar el contraste de un fondo blanco debemos colorear el texto en negro y viceversa. El problema planteado era hallar el color de fondo que maximice el contraste para un texto blanco y negro, simultáneamente.</p>
<p>En un primer momento me decanté por el gris <code>#808080</code> por ser el color central del cubo RGB y del cilindro HSL. Esta respuesta geométrica es la más intuitiva pero errónea. La representación del color en esos espacios está totalmente manipulada para que pueda usarse más fácilmente, pero en realidad, la percepción del color es no lineal por lo que todas las representaciones simétricas no captan de forma consistente las diferencias entre tonos.</p>
<p>Afortunadamente, me di cuenta de mi error e intenté calcular el óptimo. Como decía Ken Thompson: &ldquo;en caso de duda, usar la fuerza bruta&rdquo;.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python">
<span class="n">F</span> <span class="o">=</span> <span class="mf">0.01</span>
<span class="n">D</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">X_8bit2sRGB</span><span class="p">(</span><span class="n">X_8bit</span><span class="p">):</span>
    <span class="n">X_sRGB</span> <span class="o">=</span> <span class="n">X_8bit</span><span class="o">/</span><span class="mi">255</span>
    <span class="k">if</span> <span class="n">X_sRGB</span> <span class="o">&lt;=</span> <span class="mf">0.03928</span><span class="p">:</span>
        <span class="n">X</span> <span class="o">=</span> <span class="n">X_sRGB</span><span class="o">/</span><span class="mf">12.92</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">X</span> <span class="o">=</span> <span class="p">((</span><span class="n">X_sRGB</span><span class="o">+</span><span class="mf">0.055</span><span class="p">)</span><span class="o">/</span><span class="mf">1.055</span><span class="p">)</span><span class="o">**</span><span class="mf">2.4</span>
    <span class="k">return</span> <span class="n">X</span>    

<span class="k">for</span> <span class="n">R_8bit</span> <span class="ow">in</span> <span class="n">D</span><span class="p">:</span>
    <span class="n">R</span> <span class="o">=</span> <span class="n">X_8bit2sRGB</span><span class="p">(</span><span class="n">R_8bit</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">G_8bit</span> <span class="ow">in</span> <span class="n">D</span><span class="p">:</span>
        <span class="n">G</span> <span class="o">=</span> <span class="n">X_8bit2sRGB</span><span class="p">(</span><span class="n">G_8bit</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">B_8bit</span> <span class="ow">in</span> <span class="n">D</span><span class="p">:</span>
            <span class="n">B</span> <span class="o">=</span> <span class="n">X_8bit2sRGB</span><span class="p">(</span><span class="n">B_8bit</span><span class="p">)</span>

            <span class="n">L</span> <span class="o">=</span> <span class="mf">0.2126</span><span class="o">*</span><span class="n">R</span><span class="o">+</span><span class="mf">0.7152</span><span class="o">*</span><span class="n">G</span><span class="o">+</span><span class="mf">0.0722</span><span class="o">*</span><span class="n">B</span>
            <span class="n">C_B</span> <span class="o">=</span> <span class="p">(</span><span class="n">L</span><span class="o">+</span><span class="mf">0.05</span><span class="p">)</span><span class="o">/</span><span class="mf">0.05</span>
            <span class="n">C_W</span> <span class="o">=</span> <span class="mf">1.05</span><span class="o">/</span><span class="p">(</span><span class="n">L</span><span class="o">+</span><span class="mf">0.05</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">C_B</span> <span class="o">&gt;=</span> <span class="mf">4.5</span> <span class="ow">and</span> <span class="n">C_W</span> <span class="o">&gt;=</span> <span class="mf">4.5</span><span class="p">:</span>
                <span class="n">C</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">C_B</span><span class="o">-</span><span class="n">C_W</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">C</span> <span class="o">&lt;=</span> <span class="n">F</span><span class="p">:</span>
                    <span class="n">F</span> <span class="o">=</span> <span class="n">C</span>
                    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;#{R_8bit:02X}{G_8bit:02X}{B_8bit:02X}&#34;</span><span class="p">)</span>
</code></pre></div><p>Este script en Python que programé en dos minutos en un trozo de papel recorre todo el cubo RGB, los 16.777.216 tonos, comparando su contraste con los colores blanco y negro, seleccionando cada vez los mejores. Las matemáticas detrás de este desarrollo se encuentran recogidas en la guía de <a href="https://www.w3.org/TR/WCAG20-TECHS/G18.html">WCAG 2.0</a>. No voy a comentarlas porque no entiendo nada de teoría del color y solo me he limitado a implementarlas en este pequeño script.</p>
<p>El resultado es totalmente inesperado y en cierta forma decepcionante.</p>
<div style="background:#CF0DCC;">
    <p style="color:#000;">#CF0DCC: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
    <p style="color:#FFF;">#CF0DCC: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
</div>
<p>El color <code>#CF0DCC</code> es el óptimo, aunque un color magenta como este es horroroso y no podría usarlo en ningún diseño. Sin embargo, el script también proporciona soluciones subóptimas, con resultados prácticamente iguales pero tonos mucho más útiles como son los siguientes, que he seleccionando entre todos.</p>
<div style="background:#EC0408;">
    <p style="color:#000;">#EC0408: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
    <p style="color:#FFF;">#EC0408: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
</div>
<div style="background:#038901;">
    <p style="color:#000;">#038901: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
    <p style="color:#FFF;">#038901: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
</div>
<div style="background:#006DFB;">
    <p style="color:#000;">#006DFB: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
    <p style="color:#FFF;">#006DFB: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
</div>
<div style="background:#6562F2;">
    <p style="color:#000;">#6562F2: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
    <p style="color:#FFF;">#6562F2: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
</div>

			<div property="author" typeof="Person">
				<meta property="name" content="edkalrio" />
			</div>
			<div property="publisher" typeof="Organization">
				<meta property="name" content="Lunatic Geek Blog" />
				<div property="logo" typeof="ImageObject">
					<meta property="url" content="https://lunaticgeek.com/lunaticgeek.webp" />
				</div>
			</div>
		</article>

	</div>


<div class="site-footer">
  <div class="copyright">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
      <img src="/creative-commons.svg" class="fa" alt="creative commons" />
    </a>
    RW Labs 2022</div>
  <ul class="site-footer-items">
    
    <li class="site-footer-item-rsslink">
      <a href="https://feed.lunaticgeek.com" type="application/rss+xml" target="_blank" title="RSS">
        
        <img src="/rss.svg" class="fa" alt="feed" />
      </a>
    </li>
    <li>
      <a href="http://mdoovnnifyqyl6jmgdibrsbq6tpk22npjhntsjkwvh7syrxgepxdejad.onion">
        <img src="/tor.svg" class="fa" alt="tor" />
      </a>
    </li>
  </ul>
  <div class="powerdby">
    Powered by WIT, based on <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/taikii/whiteplain">Whiteplain</a>
  </div>
</div>



</body>
</html>
